"use strict";(self.webpackChunk_swan_io_docs=self.webpackChunk_swan_io_docs||[]).push([[56661],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var i=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,h=u["".concat(l,".").concat(m)]||u[m]||p[m]||a;return n?i.createElement(h,o(o({ref:t},d),{},{components:n})):i.createElement(h,o({ref:t},d))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<a;c++)o[c]=n[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},18394:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var i=n(87462),r=(n(67294),n(3905));const a={title:"View sensitive information"},o="View sensitive information",s={unversionedId:"topics/cards/virtual/guide-view-info",id:"topics/cards/virtual/guide-view-info",title:"View sensitive information",description:"Prepare to view sensitive information",source:"@site/docs/topics/cards/virtual/guide-view-info.mdx",sourceDirName:"topics/cards/virtual",slug:"/topics/cards/virtual/guide-view-info",permalink:"/topics/cards/virtual/guide-view-info",draft:!1,editUrl:"https://github.com/swan-io/docs/edit/main/docs/docs/topics/cards/virtual/guide-view-info.mdx",tags:[],version:"current",frontMatter:{title:"View sensitive information"},sidebar:"docSidebar",previous:{title:"Add virtual cards",permalink:"/topics/cards/virtual/guide-add"},next:{title:"Cancel virtual cards",permalink:"/topics/cards/virtual/guide-cancel"}},l={},c=[{value:"Prepare to view sensitive information",id:"view-prepare",level:2},{value:"View virtual card numbers",id:"view-number",level:2},{value:"Mutation",id:"mutation",level:3},{value:"Payload",id:"payload",level:3},{value:"After consent",id:"after-consent",level:3},{value:"Store <code>consentId</code>",id:"store-consentid",level:3}],d={toc:c},u="wrapper";function p(e){let{components:t,...a}=e;return(0,r.kt)(u,(0,i.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"view-sensitive-information"},"View sensitive information"),(0,r.kt)("h2",{id:"view-prepare"},"Prepare to view sensitive information"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"cardUrl")," available in the ",(0,r.kt)("inlineCode",{parentName:"p"},"card")," query leads to a website that displays the card with its design and its sensitive hidden information."),(0,r.kt)("p",null,"Consider integrating it into your product with an iframe or a webview.\nThis URL is available for one hour after you query it.\nAfter one hour, renew the query to get another ",(0,r.kt)("inlineCode",{parentName:"p"},"cardUrl"),"."),(0,r.kt)("admonition",{title:"Information not visible",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"If information fails to become visible despite having the appropriate permissions, it may remain hidden due to regulatory restrictions based on your location.")),(0,r.kt)("h2",{id:"view-number"},"View virtual card numbers"),(0,r.kt)("p",null,"To make online payments you usually need to provide the card numbers, the expiration date, and the CVC.\nAll of this data is considered sensitive and is not directly available through the Web Banking interface or the API."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"When the Account member wants to display sensitive information, you must call the ",(0,r.kt)("inlineCode",{parentName:"li"},"viewCardNumbers")," mutation which returns a consent."),(0,r.kt)("li",{parentName:"ol"},"Replace $YOUR_CARD_ID with your card ID, and $YOUR_REDIRECT_URL with the URL you want to redirect the user to after viewing the card numbers."),(0,r.kt)("li",{parentName:"ol"},"Make sure you are authenticated with a user access token using the name of the card's account member."),(0,r.kt)("li",{parentName:"ol"},"Then a ",(0,r.kt)("inlineCode",{parentName:"li"},"consentUrl")," is returned which invites the user to start the Strong Customer Authentication with Swan. You need to open a native pop-up to display the ",(0,r.kt)("inlineCode",{parentName:"li"},"consentUrl"),". This URL will redirect the user to a page with the card numbers displayed with the card design.")),(0,r.kt)("h3",{id:"mutation"},"Mutation"),(0,r.kt)("p",null,"\ud83d\udd0e ",(0,r.kt)("a",{parentName:"p",href:"https://explorer.swan.io?query=bXV0YXRpb24gVmlld1NlbnNpdGl2ZUluZm8gewogIHZpZXdDYXJkTnVtYmVycygKICAgIGlucHV0OiB7IGNhcmRJZDogIiRZT1VSX0NBUkRfSUQiLCBjb25zZW50UmVkaXJlY3RVcmw6ICIkWU9VUl9SRURJUkVDVF9VUkwiIH0KICApIHsKICAgIC4uLiBvbiBWaWV3Q2FyZE51bWJlcnNTdWNjZXNzUGF5bG9hZCB7CiAgICAgIF9fdHlwZW5hbWUKICAgICAgY29uc2VudCB7CiAgICAgICAgY29uc2VudFVybAogICAgICAgIGlkCiAgICAgIH0KICAgIH0KICB9Cn0K&tab=api"},"Open the mutation in API Explorer")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"{4-5,8} showLineNumbers","{4-5,8}":!0,showLineNumbers:!0},'mutation ViewSensitiveInfo {\n  viewCardNumbers(\n    input: {\n      cardId: "$YOUR_CARD_ID"\n      consentRedirectUrl: "$YOUR_REDIRECT_URL"\n    }\n  ) {\n    ... on ViewCardNumbersSuccessPayload {\n      __typename\n      consent {\n        consentUrl\n        id\n      }\n    }\n  }\n}\n')),(0,r.kt)("h3",{id:"payload"},"Payload"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:"{6-7} showLineNumbers","{6-7}":!0,showLineNumbers:!0},'{\n  "data": {\n    "viewCardNumbers": {\n      "__typename": "ViewCardNumbersSuccessPayload",\n      "consent": {\n        "consentUrl": "$YOUR_CONSENT_URL",\n        "id": "$YOUR_CONSENT_ID"\n      }\n    }\n  }\n}\n')),(0,r.kt)("h3",{id:"after-consent"},"After consent"),(0,r.kt)("p",null,"After the consent is accepted, the card's sensitive information is ",(0,r.kt)("strong",{parentName:"p"},"displayed for five minutes"),".\nThe client can click to copy any of the sensitive information to their clipboard.\nAfter they're done with the card info, they can click OK to be redirected to the ",(0,r.kt)("inlineCode",{parentName:"p"},"redirectUrl")," set up during the ",(0,r.kt)("inlineCode",{parentName:"p"},"viewCardNumbers")," mutation."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Swan card with information masked and revealed",src:n(53692).Z,width:"1194",height:"452"})),(0,r.kt)("h3",{id:"store-consentid"},"Store ",(0,r.kt)("inlineCode",{parentName:"h3"},"consentId")),(0,r.kt)("p",null,"To avoid repeating the Strong Customer Authentication each time the client wants to reveal the card numbers, the same ",(0,r.kt)("inlineCode",{parentName:"p"},"consentUrl")," can be called anytime for five minutes after the consent."),(0,r.kt)("p",null,"Consider storing the ",(0,r.kt)("inlineCode",{parentName:"p"},"consentId")," on your side and run a consent query to check the consent status is ",(0,r.kt)("inlineCode",{parentName:"p"},"Accepted")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"updateAt")," is less than five minutes, before reusing the ",(0,r.kt)("inlineCode",{parentName:"p"},"consentUrl"),".\nThe ",(0,r.kt)("inlineCode",{parentName:"p"},"consentUrl")," only works in the cardholder's browser where the consent was completed."))}p.isMDXComponent=!0},53692:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/cards-view-info-ed2a01984db5049f0f2af9f10163ef71.png"}}]);