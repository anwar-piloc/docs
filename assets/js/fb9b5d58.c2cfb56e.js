"use strict";(self.webpackChunk_swan_io_docs=self.webpackChunk_swan_io_docs||[]).push([[49473],{3905:(n,e,t)=>{t.d(e,{Zo:()=>s,kt:()=>b});var i=t(67294);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function r(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,i,a=function(n,e){if(null==n)return{};var t,i,a={},o=Object.keys(n);for(i=0;i<o.length;i++)t=o[i],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)t=o[i],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var d=i.createContext({}),u=function(n){var e=i.useContext(d),t=e;return n&&(t="function"==typeof n?n(e):r(r({},e),n)),t},s=function(n){var e=u(n.components);return i.createElement(d.Provider,{value:e},n.children)},g="mdxType",p={inlineCode:"code",wrapper:function(n){var e=n.children;return i.createElement(i.Fragment,{},e)}},c=i.forwardRef((function(n,e){var t=n.components,a=n.mdxType,o=n.originalType,d=n.parentName,s=l(n,["components","mdxType","originalType","parentName"]),g=u(t),c=a,b=g["".concat(d,".").concat(c)]||g[c]||p[c]||o;return t?i.createElement(b,r(r({ref:e},s),{},{components:t})):i.createElement(b,r({ref:e},s))}));function b(n,e){var t=arguments,a=e&&e.mdxType;if("string"==typeof n||a){var o=t.length,r=new Array(o);r[0]=c;var l={};for(var d in e)hasOwnProperty.call(e,d)&&(l[d]=e[d]);l.originalType=n,l[g]="string"==typeof n?n:a,r[1]=l;for(var u=2;u<o;u++)r[u]=t[u];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}c.displayName="MDXCreateElement"},84030:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var i=t(83117),a=(t(67294),t(3905));const o={title:"Finalize an onboarding"},r="Finalize an onboarding",l={unversionedId:"topics/onboarding/overview/guide-finalize-onboarding",id:"topics/onboarding/overview/guide-finalize-onboarding",title:"Finalize an onboarding",description:"You can finalize onboardings using the API.",source:"@site/docs/topics/onboarding/overview/guide-finalize-onboarding.mdx",sourceDirName:"topics/onboarding/overview",slug:"/topics/onboarding/overview/guide-finalize-onboarding",permalink:"/topics/onboarding/overview/guide-finalize-onboarding",draft:!1,editUrl:"https://github.com/swan-io/docs/edit/main/docs/docs/topics/onboarding/overview/guide-finalize-onboarding.mdx",tags:[],version:"current",frontMatter:{title:"Finalize an onboarding"},sidebar:"docSidebar",previous:{title:"Monitor onboarding progress",permalink:"/topics/onboarding/overview/guide-monitor-onboarding"},next:{title:"Individual account onboarding",permalink:"/topics/onboarding/individual/about"}},d={},u=[{value:"Guide",id:"guide",level:2},{value:"Mutation",id:"mutation",level:2},{value:"Payload",id:"payload",level:2}],s={toc:u},g="wrapper";function p(n){let{components:e,...t}=n;return(0,a.kt)(g,(0,i.Z)({},s,t,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"finalize-an-onboarding"},"Finalize an onboarding"),(0,a.kt)("p",null,"You can finalize onboardings ",(0,a.kt)("strong",{parentName:"p"},"using the API"),"."),(0,a.kt)("p",null,"Your ",(0,a.kt)("strong",{parentName:"p"},"end users")," can also finalize their own onboardings ",(0,a.kt)("strong",{parentName:"p"},"using the onboarding URLs")," you create for ",(0,a.kt)("a",{parentName:"p",href:"/topics/onboarding/individual/guide-create-onboarding"},"individuals")," or ",(0,a.kt)("a",{parentName:"p",href:"/topics/onboarding/company/guide-create-onboarding"},"companies"),"."),(0,a.kt)("admonition",{title:"Prerequisites",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"To finalize an onboarding using the API:"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"You must have a ",(0,a.kt)("a",{parentName:"li",href:"https://docs.swan.io/api/authentication/user-access-token"},"user access token")," for the user whose onboarding you're finalizing, and the user must have accessed their onboarding URL at least one time."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("a",{parentName:"li",href:"/topics/onboarding/about#onboarding-statuses"},"onboarding status")," must be ",(0,a.kt)("inlineCode",{parentName:"li"},"Ongoing (Valid)"),".")),(0,a.kt)("p",{parentName:"admonition"},"If you need to update an onboarding before finalizing it, follow the guides for updating an ",(0,a.kt)("a",{parentName:"p",href:"/topics/onboarding/individual/guide-update-onboarding"},"individual")," or ",(0,a.kt)("a",{parentName:"p",href:"/topics/onboarding/company/guide-update-onboarding"},"company")," onboarding.")),(0,a.kt)("h2",{id:"guide"},"Guide"),(0,a.kt)("p",null,"Finalize an onboarding using the API."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"First, ",(0,a.kt)("a",{parentName:"li",href:"../overview/guide-retrieve-onboarding-id"},"retrieve the ID")," for the onboarding you're finalizing."),(0,a.kt)("li",{parentName:"ol"},"Add the ",(0,a.kt)("inlineCode",{parentName:"li"},"finalizeOnboarding")," mutation."),(0,a.kt)("li",{parentName:"ol"},"Enter the onboarding ID retrieved in step 1."),(0,a.kt)("li",{parentName:"ol"},"Add optional messages to the success payload, either for validation or in case of rejection."),(0,a.kt)("li",{parentName:"ol"},"Confirm you're using the user access token to run the mutation."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u25b6 Run")," your mutation.")),(0,a.kt)("h2",{id:"mutation"},"Mutation"),(0,a.kt)("p",null,"\ud83d\udd0e ",(0,a.kt)("a",{parentName:"p",href:"https://explorer.swan.io?query=bXV0YXRpb24gZmluYWxpemVPbmJvYXJkaW5nIHsKICBmaW5hbGl6ZU9uYm9hcmRpbmcoaW5wdXQ6IHsgb25ib2FyZGluZ0lkOiAiJE9OQk9BUkRJTkdfSUQiIH0pIHsKICAgIC4uLiBvbiBGaW5hbGl6ZU9uYm9hcmRpbmdTdWNjZXNzUGF5bG9hZCB7CiAgICAgIF9fdHlwZW5hbWUKICAgICAgb25ib2FyZGluZyB7CiAgICAgICAgYWNjb3VudCB7CiAgICAgICAgICBpZAogICAgICAgICAgaG9sZGVyIHsKICAgICAgICAgICAgaWQKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc3RhdHVzSW5mbyB7CiAgICAgICAgICBzdGF0dXMKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC4uLiBvbiBPbmJvYXJkaW5nTm90Q29tcGxldGVkUmVqZWN0aW9uIHsKICAgICAgX190eXBlbmFtZQogICAgfQogICAgLi4uIG9uIFZhbGlkYXRpb25SZWplY3Rpb24gewogICAgICBfX3R5cGVuYW1lCiAgICAgIG1lc3NhZ2UKICAgIH0KICB9Cn0%3D&tab=api"},"Open the mutation in API Explorer")),(0,a.kt)("p",null,"Notice the request to include the account ID and account holder ID, as well as the onboarding status, in the success payload."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"{2,6-9,13} showLineNumbers","{2,6-9,13}":!0,showLineNumbers:!0},'mutation finalizeOnboarding {\n  finalizeOnboarding(input: { onboardingId: "$ONBOARDING_ID" }) {\n    ... on FinalizeOnboardingSuccessPayload {\n      __typename\n      onboarding {\n        account {\n          id\n          holder {\n            id\n          }\n        }\n        statusInfo {\n          status\n        }\n      }\n    }\n    ... on OnboardingNotCompletedRejection {\n      __typename\n    }\n    ... on ValidationRejection {\n      __typename\n      message\n    }\n  }\n}\n')),(0,a.kt)("h2",{id:"payload"},"Payload"),(0,a.kt)("p",null,"Notice the ID for the newly-created account and account holder, as well as the onboarding status ",(0,a.kt)("inlineCode",{parentName:"p"},"Finalized"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"{4,7,9,13} showLineNumbers","{4,7,9,13}":!0,showLineNumbers:!0},'{\n  "data": {\n    "finalizeOnboarding": {\n      "__typename": "FinalizeOnboardingSuccessPayload",\n      "onboarding": {\n        "account": {\n          "id": "$NEW_ACCOUNT_ID",\n          "holder": {\n            "id": "$NEW_ACCOUNT_HOLDER_ID"\n          }\n        },\n        "statusInfo": {\n          "status": "Finalized"\n        }\n      }\n    }\n  }\n}\n')))}p.isMDXComponent=!0}}]);