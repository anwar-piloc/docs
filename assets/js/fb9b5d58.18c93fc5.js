"use strict";(self.webpackChunk_swan_io_docs=self.webpackChunk_swan_io_docs||[]).push([[49473],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>b});var i=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var d=i.createContext({}),s=function(e){var n=i.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},u=function(e){var n=s(e.components);return i.createElement(d.Provider,{value:n},e.children)},g="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},c=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,d=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),g=s(t),c=a,b=g["".concat(d,".").concat(c)]||g[c]||p[c]||o;return t?i.createElement(b,r(r({ref:n},u),{},{components:t})):i.createElement(b,r({ref:n},u))}));function b(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,r=new Array(o);r[0]=c;var l={};for(var d in n)hasOwnProperty.call(n,d)&&(l[d]=n[d]);l.originalType=e,l[g]="string"==typeof e?e:a,r[1]=l;for(var s=2;s<o;s++)r[s]=t[s];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}c.displayName="MDXCreateElement"},84030:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var i=t(83117),a=(t(67294),t(3905));const o={title:"Finalize an onboarding"},r="Finalize an onboarding",l={unversionedId:"topics/onboarding/overview/guide-finalize-onboarding",id:"topics/onboarding/overview/guide-finalize-onboarding",title:"Finalize an onboarding",description:"You can finalize onboardings using the API.",source:"@site/docs/topics/onboarding/overview/guide-finalize-onboarding.mdx",sourceDirName:"topics/onboarding/overview",slug:"/topics/onboarding/overview/guide-finalize-onboarding",permalink:"/topics/onboarding/overview/guide-finalize-onboarding",draft:!1,editUrl:"https://github.com/swan-io/docs/edit/main/docs/docs/topics/onboarding/overview/guide-finalize-onboarding.mdx",tags:[],version:"current",frontMatter:{title:"Finalize an onboarding"},sidebar:"docSidebar",previous:{title:"Monitor onboarding progress",permalink:"/topics/onboarding/overview/guide-monitor-onboarding"},next:{title:"Individual account onboarding",permalink:"/topics/onboarding/individual/about"}},d={},s=[{value:"Guide",id:"guide",level:2},{value:"Mutation",id:"mutation",level:2},{value:"Payload",id:"payload",level:2}],u={toc:s},g="wrapper";function p(e){let{components:n,...t}=e;return(0,a.kt)(g,(0,i.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"finalize-an-onboarding"},"Finalize an onboarding"),(0,a.kt)("p",null,"You can finalize onboardings ",(0,a.kt)("strong",{parentName:"p"},"using the API"),"."),(0,a.kt)("p",null,"Your ",(0,a.kt)("strong",{parentName:"p"},"end users")," can also finalize their own onboardings ",(0,a.kt)("strong",{parentName:"p"},"using the onboarding URLs")," you create for ",(0,a.kt)("a",{parentName:"p",href:"/topics/onboarding/individual/guide-create-onboarding"},"individuals")," or ",(0,a.kt)("a",{parentName:"p",href:"/topics/onboarding/company/guide-create-onboarding"},"companies"),"."),(0,a.kt)("admonition",{title:"Prerequisites",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"To finalize an onboarding using the API:"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"You must have a ",(0,a.kt)("a",{parentName:"li",href:"https://docs.swan.io/api/authentication/user-access-token"},"user access token")," for the user whose onboarding you're finalizing, and the user must have accessed their onboarding URL at least one time."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("a",{parentName:"li",href:"/topics/onboarding/about#onboarding-statuses"},"onboarding status")," must be ",(0,a.kt)("inlineCode",{parentName:"li"},"Ongoing (Valid)"),".")),(0,a.kt)("p",{parentName:"admonition"},"If you need to update an onboarding before finalizing it, follow the guides for updating an ",(0,a.kt)("a",{parentName:"p",href:"/topics/onboarding/individual/guide-update-onboarding"},"individual")," or ",(0,a.kt)("a",{parentName:"p",href:"/topics/onboarding/company/guide-update-onboarding"},"company")," onboarding.")),(0,a.kt)("h2",{id:"guide"},"Guide"),(0,a.kt)("p",null,"Finalize an onboarding using the API."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"First, ",(0,a.kt)("a",{parentName:"li",href:"../overview/guide-retrieve-onboarding-id"},"retrieve the ID")," for the onboarding you're finalizing."),(0,a.kt)("li",{parentName:"ol"},"In the API Explorer, add the ",(0,a.kt)("inlineCode",{parentName:"li"},"finalizeOnboarding")," mutation."),(0,a.kt)("li",{parentName:"ol"},"Enter the onboarding ID retrieved in step 1."),(0,a.kt)("li",{parentName:"ol"},"Add optional messages to the success payload, either for validation or in case of rejection."),(0,a.kt)("li",{parentName:"ol"},"Confirm you're using the user access token to run the mutation."),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("strong",{parentName:"li"},"\u25b6 Run"),".")),(0,a.kt)("h2",{id:"mutation"},"Mutation"),(0,a.kt)("p",null,"\ud83d\udd0e ",(0,a.kt)("a",{parentName:"p",href:"https://explorer.swan.io?query=bXV0YXRpb24gZmluYWxpemVPbmJvYXJkaW5nIHsKICBmaW5hbGl6ZU9uYm9hcmRpbmcoaW5wdXQ6IHsgb25ib2FyZGluZ0lkOiAiJE9OQk9BUkRJTkdfSUQiIH0pIHsKICAgIC4uLiBvbiBGaW5hbGl6ZU9uYm9hcmRpbmdTdWNjZXNzUGF5bG9hZCB7CiAgICAgIF9fdHlwZW5hbWUKICAgICAgb25ib2FyZGluZyB7CiAgICAgICAgYWNjb3VudCB7CiAgICAgICAgICBpZAogICAgICAgICAgaG9sZGVyIHsKICAgICAgICAgICAgaWQKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc3RhdHVzSW5mbyB7CiAgICAgICAgICBzdGF0dXMKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC4uLiBvbiBPbmJvYXJkaW5nTm90Q29tcGxldGVkUmVqZWN0aW9uIHsKICAgICAgX190eXBlbmFtZQogICAgfQogICAgLi4uIG9uIFZhbGlkYXRpb25SZWplY3Rpb24gewogICAgICBfX3R5cGVuYW1lCiAgICAgIG1lc3NhZ2UKICAgIH0KICB9Cn0%3D&tab=api"},"Open the mutation in API Explorer")),(0,a.kt)("p",null,"Notice the request to include the account ID and account holder ID, as well as the onboarding status, in the success payload."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"{2,6-9,13} showLineNumbers","{2,6-9,13}":!0,showLineNumbers:!0},'mutation finalizeOnboarding {\n  finalizeOnboarding(input: { onboardingId: "$ONBOARDING_ID" }) {\n    ... on FinalizeOnboardingSuccessPayload {\n      __typename\n      onboarding {\n        account {\n          id\n          holder {\n            id\n          }\n        }\n        statusInfo {\n          status\n        }\n      }\n    }\n    ... on OnboardingNotCompletedRejection {\n      __typename\n    }\n    ... on ValidationRejection {\n      __typename\n      message\n    }\n  }\n}\n')),(0,a.kt)("h2",{id:"payload"},"Payload"),(0,a.kt)("p",null,"Notice the ID for the newly-created account and account holder, as well as the onboarding status ",(0,a.kt)("inlineCode",{parentName:"p"},"Finalized"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"{4,7,9,13} showLineNumbers","{4,7,9,13}":!0,showLineNumbers:!0},'{\n  "data": {\n    "finalizeOnboarding": {\n      "__typename": "FinalizeOnboardingSuccessPayload",\n      "onboarding": {\n        "account": {\n          "id": "$NEW_ACCOUNT_ID",\n          "holder": {\n            "id": "$NEW_ACCOUNT_HOLDER_ID"\n          }\n        },\n        "statusInfo": {\n          "status": "Finalized"\n        }\n      }\n    }\n  }\n}\n')))}p.isMDXComponent=!0}}]);